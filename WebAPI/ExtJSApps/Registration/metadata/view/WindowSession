{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "height": 630,
        "padding": 5,
        "width": 836,
        "designer|userClassName": "WindowSession",
        "layout": "fit",
        "title": "Session Editor"
    },
    "designerId": "dba1adeb-4f72-49c6-a8d3-c3143110e49c",
    "cn": [
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "designer|userClassName": "MyToolbar5"
            },
            "designerId": "2e559b97-3001-465f-9317-38da3d4936ea",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "WindowSessionSaveButtonId",
                        "designer|userClassName": "MyButton9",
                        "text": "Save"
                    },
                    "designerId": "1cd3c844-ffa0-438f-ad3a-1e5056ff63b6",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onButtonClick",
                                "fn": "onButtonClick",
                                "implHandler": [
                                    "Ext.getCmp(\"SessionTagsGridPanelId\").getStore().sync();\r",
                                    "var panel = Ext.getCmp(\"sessionFormPanelEditorId\");\r",
                                    "var form = panel.getForm();\r",
                                    "panel.getForm().updateRecord();\r",
                                    "\r",
                                    "\r",
                                    "/*\r",
                                    "\r",
                                    "\r",
                                    "\r",
                                    "// the formValues are what I want to use to update my REST store\r",
                                    "\r",
                                    "\r",
                                    "var store = Ext.create(\"RegistrationApp.store.StoreSessions\",{});\r",
                                    "store.load({\r",
                                    "    params: {\r",
                                    "        id: formValues.sessionId\r",
                                    "    },\r",
                                    "    scope: this,\r",
                                    "    callback: function(records,operation,success) {\r",
                                    "\r",
                                    "        if (records.length == 1) {\r",
                                    "\r",
                                    "\r",
                                    "            // what I really want to do is some kind of \"Ext.apply(\" that will\r",
                                    "            //   apply all fields in my formValues to the record rather than one \r",
                                    "            //   at a time here\r",
                                    "            records[0].set(\"description\",formValues.description);\r",
                                    "            records[0].set(\"title\",formValues.title);\r",
                                    "\r",
                                    "            // how do I stuff the record back into the store as a uncommitted record?\r",
                                    "            store.add(records[0]);\r",
                                    "\r",
                                    "\r",
                                    "            // force the REST store to PUT\r",
                                    "            store.sync();\r",
                                    "\r",
                                    "\r",
                                    "\r",
                                    "            var sessionsBySpeakerStore = Ext.getCmp(\"sessionsBySpeakerGridPanelId\").store;\r",
                                    "            sessionsBySpeakerStore.load({\r",
                                    "                params: {\r",
                                    "                    codeCampYearId: -1,\r",
                                    "                    sessionId: -1,\r",
                                    "                    attendeesId: formValues.attendeeId // no s here, boo boo on table sessionspeakers\r",
                                    "                }\r",
                                    "\r",
                                    "            });\r",
                                    "\r",
                                    "            \r",
                                    "          }\r",
                                    "        }\r",
                                    "    });\r",
                                    "\r",
                                    "\r",
                                    "*/\r",
                                    "\r",
                                    "\r",
                                    "\r",
                                    "\r",
                                    ""
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "96168842-8ed5-4499-ba9f-e61779816be7"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "SessionEditorPanelId",
                "designer|userClassName": "MyPanel5",
                "layout": "border",
                "title": null
            },
            "designerId": "49da3cfc-de72-4613-a17b-56a502a515fe",
            "cn": [
                {
                    "type": "Ext.form.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 6,
                        "layout|region": "center",
                        "id": "sessionFormPanelEditorId",
                        "designer|userClassName": "MyForm11",
                        "bodyPadding": 10,
                        "title": null
                    },
                    "designerId": "2634b1e3-90d4-4f6f-bfcc-ecc8258421ce",
                    "cn": [
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": null,
                                "itemId": "FieldSetSessionEditorItemId",
                                "width": null,
                                "designer|userClassName": "MyFieldSet1",
                                "title": "Basic Session Information"
                            },
                            "designerId": "0f9ad0fb-ea3e-4758-b1c9-93b83fede49b",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "width": 150,
                                        "designer|userClassName": "MyTextField48",
                                        "fieldLabel": "Title",
                                        "name": "title"
                                    },
                                    "designerId": "4427f98e-f8d0-4527-9085-7a2239bce9d7"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "width": 150,
                                        "designer|userClassName": "MyTextField48",
                                        "fieldLabel": "Hash Tags For Twitter",
                                        "name": "twitterHashTags"
                                    },
                                    "designerId": "a5a3c928-4eec-4e4c-bc69-b290d3d12ffb"
                                },
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "designer|userClassName": "MyComboBox2",
                                        "fieldLabel": "Session Level",
                                        "name": "sessionLevel",
                                        "displayField": "description",
                                        "store": "SessionLevelStore",
                                        "valueField": "id"
                                    },
                                    "designerId": "32a579d1-1f56-4d67-b829-2225d16f603f"
                                },
                                {
                                    "type": "Ext.form.field.TextArea",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "height": 100,
                                        "designer|userClassName": "MyTextArea3",
                                        "fieldLabel": "Session Description (just text, no html please)",
                                        "name": "description"
                                    },
                                    "designerId": "48434577-15b0-48ea-b8af-af92b2991aa0"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "id": null,
                                        "designer|userClassName": "MyTextField37",
                                        "fieldLabel": "sessionId",
                                        "name": "sessionId"
                                    },
                                    "designerId": "fc929937-0657-4b86-a738-c7af38fa9259"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "100%",
                                        "id": null,
                                        "designer|userClassName": "MyTextField37",
                                        "fieldLabel": "attendeesId",
                                        "name": "id"
                                    },
                                    "designerId": "6c2097d4-f255-49a9-a6db-fdc6054671cc"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 2,
                        "layout|region": "east",
                        "id": "SessionTagsGridPanelId",
                        "width": 150,
                        "designer|userClassName": "MyGridPanel1",
                        "autoScroll": true,
                        "title": "Session Tags",
                        "store": "TagStore"
                    },
                    "designerId": "3c327de4-3d32-47e0-8c62-627f60585318",
                    "cn": [
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "MyGridView1"
                            },
                            "designerId": "a1bed852-5aa1-484f-bf3f-5e09d5be71f7"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "width": 160,
                                "designer|userClassName": "MyColumn3",
                                "dataIndex": "tagName",
                                "text": "TagName",
                                "flex": 1
                            },
                            "designerId": "a0dfdef7-f83d-48ab-ab18-262d1f361d8a"
                        },
                        {
                            "type": "Ext.grid.column.Boolean",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "width": 60,
                                "designer|userClassName": "MyBooleanColumn1",
                                "dataIndex": "taggedInSession",
                                "text": "Tagged"
                            },
                            "designerId": "934ec198-c70c-4e8d-b3bf-54f28040a2d8"
                        },
                        {
                            "type": "Ext.selection.CheckboxModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": "Ext.selection.CheckboxModel",
                            "userConfig": {
                                "designer|userClassName": "MyCheckboxSelectionModel"
                            },
                            "designerId": "2dfde0c2-ff85-4c1c-88ff-8eeead7f9524",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "onCheckboxselectionmodelSelectionChange",
                                        "fn": "onCheckboxselectionmodelSelectionChange",
                                        "implHandler": [
                                            "// all records that are selected are passed in here.  we need to run through the store\r",
                                            "// itself and verify that is what we think we should have.\r",
                                            "var tagsSelected1 = [];\r",
                                            "Ext.each(selected,function(rec) {\r",
                                            "    tagsSelected1.push(rec.getData().tagName); \r",
                                            "});\r",
                                            "\r",
                                            "\r",
                                            "// find record in store and update it\r",
                                            "var tagList = Ext.getCmp(\"SessionTagsGridPanelId\");\r",
                                            "var tagListStore = tagList.store;\r",
                                            "\r",
                                            "tagListStore.each(function(storeRec) {\r",
                                            "    var storeRecTagName = storeRec.getData().tagName;\r",
                                            "    var storeRecTaggedInSession = storeRec.getData().taggedInSession;\r",
                                            "    var gridPanelTagged = Ext.Array.contains(tagsSelected1,storeRecTagName);\r",
                                            "\r",
                                            "    if (storeRecTaggedInSession != gridPanelTagged) {\r",
                                            "        storeRec.set(\"taggedInSession\",gridPanelTagged);\r",
                                            "    }\r",
                                            "});\r",
                                            ""
                                        ],
                                        "name": "selectionchange",
                                        "scope": "me"
                                    },
                                    "designerId": "dcd514e2-7c4f-4dd4-a191-1ef07a2e38be"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onWindowAfterRender",
                "fn": "onWindowAfterRender",
                "implHandler": [
                    "/*\r",
                    "var sessionEditForm = Ext.getCmp(\"sessionFormPanelEditorId\").getForm();\r",
                    "\r",
                    "sessionEditForm.setValues(this.sessionData);\r",
                    "*/\r",
                    "\r",
                    "var speakerProfilePanel =  Ext.getCmp('speakerAfterLoginProfileId');\r",
                    "var retData = speakerProfilePanel.getForm().getValues();\r",
                    "\r",
                    "//debugger;\r",
                    "\r",
                    "var tagList = Ext.getCmp(\"SessionTagsGridPanelId\");\r",
                    "var tagListStore = tagList.store;\r",
                    "tagListStore.load({\r",
                    "    params: {\r",
                    "        sessionId: retData.attendeesId\r",
                    "    },\r",
                    "    callback: function(records,operation,success) {\r",
                    "        var sm = tagList.getSelectionModel();\r",
                    "        var recs = [];\r",
                    "        Ext.each(records,function(rec) {\r",
                    "            if (rec.get(\"taggedInSession\") === true) {\r",
                    "                recs.push(rec);\r",
                    "            }\r",
                    "        });\r",
                    "        sm.select(recs);\r",
                    "        tagList.getView().focusRow(0);\r",
                    "    }\r",
                    "});\r",
                    "//debugger;\r",
                    "\r",
                    "// get data from SpeakerSessions Panel on previous page (get selected row and data associated, use that to set values in this form)\r",
                    "var sessionList = Ext.getCmp(\"sessionsBySpeakerGridPanelId\").getSelectionModel().getSelection();\r",
                    "if (sessionList.length > 0) {\r",
                    "\r",
                    "    var sessionEditForm = Ext.getCmp(\"sessionFormPanelEditorId\").getForm();\r",
                    "    sessionEditForm.loadRecord(sessionList[0]);\r",
                    "\r",
                    "\r",
                    "\r",
                    "    //var data = sessionList[0].getData();   \r",
                    "    //var sessionEditForm = Ext.getCmp(\"sessionFormPanelEditorId\").getForm();\r",
                    "    //sessionEditForm.setValues(data);\r",
                    "}\r",
                    ""
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "designerId": "ffae8ddf-e1f0-4b8c-aeb8-804425e5f27d"
        }
    ]
}