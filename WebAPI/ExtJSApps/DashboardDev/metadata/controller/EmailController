{
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "EmailController"
    },
    "id": "ExtBox1-ext-gen15061",
    "designerId": "ea603ba0-dc16-49a4-99a5-9ab2b7469f89",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onPreviewLetterButtonIdClick",
                "fn": "onPreviewLetterButtonIdClick",
                "implHandler": [
                    "var formValues = Ext.getCmp(\"mailGeneratorFormPanelId\").getForm().getValues();\r",
                    "\r",
                    "var myMask = new Ext.LoadMask(Ext.getBody(), \r",
                    "{msg:\"Generating Email Preview...\"});\r",
                    "var task = new Ext.util.DelayedTask(function(){\r",
                    "    myMask.show();\r",
                    "});\r",
                    "\r",
                    "task.delay(500);\r",
                    "Ext.Ajax.request({ \r",
                    "    url:'/rpc/Email/EmailPreview', \r",
                    "    params: formValues,\r",
                    "    method: 'POST',\r",
                    "    success: function(r, o) { \r",
                    "        task.cancel();\r",
                    "        if (myMask.isVisible) {\r",
                    "            myMask.hide();\r",
                    "        }\r",
                    "        Ext.Msg.alert('Success to ' + formValues.previewEmailSend);\r",
                    "    },\r",
                    "    failure: function(r,o) {\r",
                    "        task.cancel();\r",
                    "        if (myMask.isVisible) {\r",
                    "            myMask.hide();\r",
                    "        }  \r",
                    "\r",
                    "        Ext.Msg.alert(\"Login Failed. Please Try Again\");\r",
                    "    }\r",
                    "});\r",
                    ""
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#previewLetterButtonId"
            },
            "designerId": "4888d276-bb7b-4b8d-8637-66884e050b3f"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onGenerateEmailButtonIdClick",
                "fn": "onGenerateEmailButtonIdClick",
                "implHandler": [
                    "var formValues = Ext.getCmp(\"mailGeneratorFormPanelId\").getForm().getValues();\r",
                    "\r",
                    "var myMask = new Ext.LoadMask(Ext.getBody(), \r",
                    "{msg:\"Generating Email To DB...\"});\r",
                    "var task = new Ext.util.DelayedTask(function(){\r",
                    "    myMask.show();\r",
                    "});\r",
                    "\r",
                    "//debugger;\r",
                    "//Ext.Ajax.timeout = 90000\r",
                    "\r",
                    "task.delay(500);\r",
                    "Ext.Ajax.request({ \r",
                    "    timeout: 300000,\r",
                    "    url:'/rpc/Email/EmailGenerate', \r",
                    "    params: formValues,\r",
                    "    method: 'POST',\r",
                    "    success: function(r, o) { \r",
                    "        task.cancel();\r",
                    "        if (myMask.isVisible) {\r",
                    "            myMask.hide();\r",
                    "        }\r",
                    "        Ext.Msg.alert('Success generated ' + formValues.previewEmailSend);\r",
                    "    },\r",
                    "    failure: function(r,o) {\r",
                    "        task.cancel();\r",
                    "        if (myMask.isVisible) {\r",
                    "            myMask.hide();\r",
                    "        }  \r",
                    "\r",
                    "        Ext.Msg.alert(\"Login Failed. Please Try Again\");\r",
                    "    }\r",
                    "});\r",
                    ""
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#GenerateEmailButtonId"
            },
            "designerId": "d586439a-c140-4ef6-b97b-2365dd84ba7c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onLoadAttendeesButtonIdClick",
                "fn": "onLoadAttendeesButtonIdClick",
                "implHandler": [
                    "\r",
                    "gridPanel = Ext.getCmp(\"attendeesListGridPanelId\");\r",
                    "var store = gridPanel.store;\r",
                    "var form = Ext.getCmp(\"mailGeneratorFormPanelId\").getForm();\r",
                    "\r",
                    "var cntLabel = Ext.getCmp(\"attendeeListToolBarCntId\");\r",
                    "cntLabel.setText('Total: *');\r",
                    "\r",
                    "store.load({\r",
                    "    scope: this,\r",
                    "    callback: function(records,operation,success) {\r",
                    "        cntLabel.setText('Total: ' + records.length);\r",
                    "    },\r",
                    "    params: form.getValues()\r",
                    "});"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#loadAttendeesButtonId"
            },
            "designerId": "cad692d0-ca0a-4d19-9352-6a71211e70e8"
        }
    ]
}